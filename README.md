# コンペ概要と成績
2022年11月～2023年1月にProbSpaceで行われたコンペ。3地点（東京、千葉、宇都宮）において、気象データをもとに花粉飛散量を予測する。学習期間は2017年～2020年3月、予測期間は2020年4月1日～14日。結果は10位/130チーム。  

https://comp.probspace.com/competitions/pollen_counts

# 解法概要
- トピックで紹介されていた以下の文献を参照し、2020年の花粉の総飛散量を温度データをもとに予測。それをもとに、2017年～2019年の花粉飛散量（目的変数）が2020年の水準と同等になるように修正した。
https://agriknowledge.affrc.go.jp/RN/2010762207.pdf
- 特徴抽出は、トピックで上がっていたものや、可視化から思いついたものを順次試した。最終的に特徴量間の相関が高いもの（相関係数0.95以上）は省き、予測に使用。
- モデルはLightGBM、パラメータはoptunaで調整。
- 予測のアンサンブルなどの後処理は行っていない。

# 所感
- 目的変数の修正によりスコアが大きく改善したが、それ以降の特徴抽出ではあまりスコアは伸びなかった。他の上位者の解法を見る限り、後処理に力を入れた方がスコアは伸びたようだった。

# コードについて
### curve_fitting(2017抜く).ipynb
2020年の花粉総飛散量の予測値を温度データをもとに算出し、保存している。目的変数の修正に使用。
### 日の出と日の入り時間取得.ipynb
各地点における提供データの期間の日の出時間を取得し保存している。予測時の特徴量抽出に使用
### val_sub.ipynb
LightGBMでバリデーション。CVは時系列的に行っており、2018年と2019年における4/1～4/14と4/15～4/28の4つの期間を用いた。バリデーションと同時にsubの予測も行っている。
### optuna.ipynb
optunaでパラメータ調整を行っている。
### EDA_箱ひげ図と特徴量推移.ipynb
特徴量を検討する際に使用している。
